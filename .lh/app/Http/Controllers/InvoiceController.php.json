{
    "sourceFile": "app/Http/Controllers/InvoiceController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1644610410979,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1644610895755,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,10 @@\n     {\n         $validated = $request->validate([\n             'invoice_type' => 'required',\n             'invoice_description' => 'required',\n-            'invoice_file' => 'required|mimes:pdf,xlx,csv'\n+            'invoice_file' => 'required|mimes:pdf,xlx,csv',\n+            'user_id' => 'required'\n         ]);\n \n \n         if ($request->hasFile('invoice_file'))\n"
                },
                {
                    "date": 1644610957727,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,9 +59,10 @@\n             $image->move($destinationPath, $image_name);\n             $invoice = new Invoice([\n                 'invoice_type'      =>  $request->get('invoice_type'),\n                 'invoice_description'       =>  $request->get('invoice_description'),\n-                'invoice_file'=>$image_name\n+                'invoice_file'=>$image_name,\n+                'user_id'=>$request->get('user_id')\n             ]);\n             $invoice->save();\n         }\n         $message=\"Upload Invoice SuccessFully\";\n"
                },
                {
                    "date": 1644611084887,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,9 +65,9 @@\n             ]);\n             $invoice->save();\n         }\n         $message=\"Upload Invoice SuccessFully\";\n-        return view('admin.invoice',compact('message'));\n+        return redirect()->route('invoice.create')->with('message',$message));\n \n     }\n \n     /**\n"
                },
                {
                    "date": 1644611096513,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,9 +65,9 @@\n             ]);\n             $invoice->save();\n         }\n         $message=\"Upload Invoice SuccessFully\";\n-        return redirect()->route('invoice.create')->with('message',$message));\n+        return redirect()->route('invoice.create')->with('message',$message);\n \n     }\n \n     /**\n"
                }
            ],
            "date": 1644610410979,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Models\\Invoice;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\DB;\n\nclass InvoiceController extends Controller\n{\n    /**\n     * Display a listing of the resource.\n     *\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function index()\n    {\n        $allInvoices=Invoice::all();\n        return view('admin.list_invoice',compact('allInvoices'));\n    }\n\n    /**\n     * Show the form for creating a new resource.\n     *\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function create()\n    {\n        $clients=DB::table('clients')\n        ->join('users','clients.user_id','=','users.id')\n        ->select('clients.*','users.*')\n        ->get();\n        return view('admin.invoice',compact('clients'));\n    }\n\n    /**\n     * Store a newly created resource in storage.\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function store(Request $request)\n    {\n        $validated = $request->validate([\n            'invoice_type' => 'required',\n            'invoice_description' => 'required',\n            'invoice_file' => 'required|mimes:pdf,xlx,csv'\n        ]);\n\n\n        if ($request->hasFile('invoice_file'))\n        {\n            $image = $request->file('invoice_file');\n\n            $image_name = time().'.'.$image->getClientOriginalExtension();\n\n            $destinationPath = base_path('public/files');\n            $image->move($destinationPath, $image_name);\n            $invoice = new Invoice([\n                'invoice_type'      =>  $request->get('invoice_type'),\n                'invoice_description'       =>  $request->get('invoice_description'),\n                'invoice_file'=>$image_name\n            ]);\n            $invoice->save();\n        }\n        $message=\"Upload Invoice SuccessFully\";\n        return view('admin.invoice',compact('message'));\n\n    }\n\n    /**\n     * Display the specified resource.\n     *\n     * @param  int  $id\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function show($id)\n    {\n        $invoice=Invoice::find($id);\n        $file=$invoice->invoice_file;\n        return view('admin.show_invoice',compact('file'));\n    }\n\n    /**\n     * Show the form for editing the specified resource.\n     *\n     * @param  int  $id\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function edit($id)\n    {\n        //\n    }\n\n    /**\n     * Update the specified resource in storage.\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n     * @param  int  $id\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function update(Request $request, $id)\n    {\n        //\n    }\n\n    /**\n     * Remove the specified resource from storage.\n     *\n     * @param  int  $id\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function destroy($id)\n    {\n        //\n    }\n}\n"
        }
    ]
}